@using TaxiManagementSystem.DTO.Enums
@model IEnumerable<TaxiManagementSystem.DTO.Ride>

<h4>My rides</h4>

<table class="table">
    <thead>
        New orders
    </thead>
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Source)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Destination)
        </th>
        <th>
            @Html.DisplayName("Ordered by")
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Distance)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.BookingTime)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.RideStatus)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.EstimatedPrice)
        </th>
        <th></th>
    </tr>

    @foreach (var item in Model.Where(x => x.RideStatus == RideStatus.New))
    {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.Source.City)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Destination.City)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.User.Email)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Distance)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.BookingTime)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.RideStatus)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.EstimatedPrice)
            </td>
            @if (User.IsInRole("Driver") && (bool)ViewBag.HaveTaxi)
            {
                <td>
                    <a href="@Url.Action("Accept", "Ride", new {id = item.Id})" class="btn btn-primary">Accept</a>
                </td>
            }
            else
            {
                <td>
                    <a href="@Url.Action("Cancel", "Ride", new {id = item.Id})" class="btn btn-primary">Cancel</a>
                </td>
            }
        </tr>
    }
</table>

<table class="table">
    <thead>
        Accepted rides
    </thead>
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Source)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Destination)
        </th>
        <th>
            @Html.DisplayName("Ordered by")
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Distance)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.BookingTime)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.RideStatus)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.EstimatedPrice)
        </th>
        <th></th>
        <th></th>
    </tr>

    @foreach (var item in Model.Where(x => x.RideStatus == RideStatus.Accepted))
    {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.Source.City)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Destination.City)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.User.Email)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Distance)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.BookingTime)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.RideStatus)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.EstimatedPrice)
            </td>
            @if (User.IsInRole("Driver"))
            {
                <td>
                    <a href="@Url.Action("Complete", "Ride", new {id = item.Id})" class="btn btn-primary">Completed</a>
                </td>
                <td>
                    <a href="@Url.Action("Reject", "Ride", new {id = item.Id})" class="btn btn-primary">Reject</a>
                </td>
            }
            else
            {
                <td>
                    <a href="@Url.Action("Cancel", "Ride", new {id = item.Id})" class="btn btn-primary">Cancel</a>
                </td>
            }
        </tr>
    }
</table>

<table class="table">
    <thead>
        Completed rides
    </thead>
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Source)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Destination)
        </th>
        <th>
            @Html.DisplayName("Ordered by")
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Distance)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.BookingTime)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.RideStatus)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.EstimatedPrice)
        </th>
    </tr>

    @foreach (var item in Model.Where(x => x.RideStatus == RideStatus.Completed))
    {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.Source.City)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Destination.City)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.User.Email)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Distance)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.BookingTime)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.RideStatus)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.EstimatedPrice)
            </td>
        </tr>
    }
</table>

<table class="table">
    <thead>
        Cancelled rides
    </thead>
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Source)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Destination)
        </th>
        <th>
            @Html.DisplayName("Ordered by")
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Distance)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.BookingTime)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.RideStatus)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.EstimatedPrice)
        </th>
    </tr>

    @foreach (var item in Model.Where(x => x.RideStatus == RideStatus.Cancelled))
    {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.Source.City)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Destination.City)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.User.Email)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Distance)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.BookingTime)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.RideStatus)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.EstimatedPrice)
            </td>
        </tr>
    }
</table>

<table class="table">
    <thead>
        Rejected rides
    </thead>
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Source)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Destination)
        </th>
        <th>
            @Html.DisplayName("Ordered by")
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Distance)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.BookingTime)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.RideStatus)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.EstimatedPrice)
        </th>
    </tr>

    @foreach (var item in Model.Where(x => x.RideStatus == RideStatus.Rejected))
    {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.Source.City)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Destination.City)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.User.Email)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Distance)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.BookingTime)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.RideStatus)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.EstimatedPrice)
            </td>
        </tr>
    }
</table>